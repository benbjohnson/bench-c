################################################################################
# Variables
################################################################################

CFLAGS=-g -Wall -Wextra -Wno-self-assign -std=c99 -D_FILE_OFFSET_BITS=64

SOURCES=$(wildcard src/**/*.c src/*.c)
OBJECTS=$(patsubst %.c,%.o,${SOURCES})


################################################################################
# Default Target
################################################################################

all: bin/bench


################################################################################
# Binaries
################################################################################

bin/bench: bin ${OBJECTS}
	$(CC) $(CFLAGS) src/bench.c -o $@
	chmod 700 $@

bin:
	mkdir -p bin


################################################################################
# Benchmark
################################################################################

run: bin/bench
	bin/bench


################################################################################
# Clean up
################################################################################

clean: 
	rm -rf bin
	rm src/*.o
